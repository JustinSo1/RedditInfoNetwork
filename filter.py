import json
import os
import pandas as pd

# # json format
  # [
  #  {...}, ..., {...}
  # ]

webregex = "("
urls = ["100percentfedup.com", "12minutos.com", "21stcenturywire.com", "24aktuelles.com", "4threvolutionarywar.wordpress.com", "abovetopsecret.com", "abriluno.com", "aceflashman.wordpress.com", "acting-man.com", "actionnews3.com", "activistpost.com", "actualidadpanamericana.com", "addictinginfo.org", "adobochronicles.com", "aheadoftheherd.com", "ahtribune.com", "allnews4us.com", "allnewspipeline.com", "alt-market.com", "alternativemediasyndicate.net", "americablog.com", "americanborderpatrol.com", "americanfreepress.net", "americanjournalreview.com", "americanlookout.com", "americanpatriotdaily.com", "americanthinker.com", "americantoday.news", "americasfreedomfighters.com", "americaslastlineofdefense.org", "amren.com", "amtvmedia.com", "ancient-code.com", "anews24.org", "angrypatriotmovement.com", "anonews.co", "anonhq.com", "antiwar.com", "asia-pacificresearch.com", "assassinationscience.com", "associatedmediacoverage.com", "attitude.co.uk", "awarenessact.com", "awazetribune.com", "awdnews.com", "awm.com", "barenakedislam.com", "barnesreview.org", "bb4sp.com", "beforeitsnews.com", "benjaminfulford.typepad.com", "bigamericannews.com", "bighairynews.com", "bipartisanreport.com", "blackgenocide.org", "blacklistednews.com", "blingnews.com", "bluenationreview.com", "breaking911.com", "breakingnews247.net", "breakingnews365.net", "breakpoint.org", "breitbart.com", "brokenworldnews.com", "burrardstreetjournal.com", "callthecops.net", "canadafreepress.com", "cannasos.com", "cap-news.com", "cbinfo24.com", "centerforsecuritypolicy.org", "channel18news.com", "channel22news.com", "channel23news.com", "channel24news.com", "channel28news.com", "channel33news.com", "channel34news.com", "channel45news.com", "charismanews.com", "checkoutthehealthyworld.com", "christwire.org", "chronicle.su", "citizensunited.org", "cityworldnews.com", "civictribune.com", "clashdaily.com", "clickhole.com", "cnnnext.com", "cnoticias.net", "cnsnews.com", "coasttocoastam.com", "coed.com", "collective-evolution.com", "commondreams.org", "concisepolitics.com", "consciouslifenews.com", "conservapedia.com", "conservativeangle.com", "conservativebyte.com", "conservativedailypost.com", "conservativefighters.com", "conservativefiringline.com", "conservativehq.com", "conservativepapers.com", "conservativepost.com", "conservativerefocus.com", "conservativespirit.com", "corbettreport.com", "countdowntozerotime.com", "countercurrents.org", "counterjihad.com", "counterpsyops.com", "cowgernation.com", "creativitymovement.net", "cryptogon.com", "dailybuzzlive.com", "dailycaller.com", "dailydiscord.com", "dailyheadlines.com", "dailyheadlines.net", "dailykos.com", "dailynews11.com", "dailynewsposts.info", "dailyoccupation.com", "dailysnark.com", "dailysquib.co.uk", "dailysurge.com", "dailytelegraph.com.au", "dailywire.com", "darkmoon.me", "dataasylum.com", "davejanda.com", "davidduke.com", "davidwolfe.com", "dcclothesline.com", "dcgazette.com", "deadlyclear.wordpress.com", "debunkingskeptics.com", "defenddemocracy.press", "democraticmoms.com", "democraticunderground.com", "derfmagazine.com", "disclose.tv", "diversitychronicle.wordpress.com", "dollarvigilante.com", "donaldtrumpnews.co", "dont-tread-on.me", "downtrend.com", "drrichswier.com", "drudgereport.com", "duffelblog.com", "duhprogressive.com", "dutchsinse.com", "eaglerising.com", "economicnoise.com", "educate-yourself.org", "educateinspirechange.org", "electionnightgatekeepers.com", "elelephantintheroom.blogspot.com", "elitereaders.com", "elkoshary.com", "elmundotoday.com", "empireherald.com", "empirenews.net", "en-volve.com", "endoftheamericandream.com", "endtime.com", "eutimes.net", "ewao.com", "experimentalvaccines.org", "expose1933.com", "express.co.uk", "eyeopening.info", "factrider.com", "fakingnews.com", "famousviralstories.com", "farmwars.info", "fbnewscycle.com", "federalistpress.com", "fellowshipoftheminds.com", "financialsurvivalnetwork.com", "firearmscoalition.org", "fognews.ru", "foodbabe.com", "freebeacon.com", "freedomoutpost.com", "freedomsfinalstand.com", "freedomsphoenix.com", "freedumjunkshun.com", "freeinfomedia.com", "freerepublic.com", "fridaymash.com", "fromthetrenchesworldreport.com", "frontpagemag.com", "gaia.com", "galacticconnection.com", "gangstergovernment.com", "gatesofvienna.net", "gellerreport.com", "geoengineeringwatch.org", "givemeliberty01.com", "globalresearch.ca", "godlikeproductions.com", "govtslaves.info", "greanvillepost.com", "greenmedinfo.com", "guccifer2.wordpress.com", "gulagbound.com", "halfwaypost.com", "hangthebankers.com", "healthimpactnews.com", "healthnutnews.com", "healthy-holistic-living.com", "heartland.org", "heightpost.com", "henrymakow.com", "higherperspectives.com", "holyobserver.com", "horowitzfreedomcenter.org", "humansarefree.com", "huzlers.com", "icr.org", "ideaspots.com", "ihr.org", "illuminati-news.com", "ilovemyfreedom.org", "immediatesafety.org", "in5d.com", "independentminute.com", "infiniteunknown.net", "informationclearinghouse.info", "informetoday.com", "infostormer.com", "infowars.com", "intellihub.com", "intrepidreport.com", "investmentresearchdynamics.com", "investmentwatchblog.com", "islamicanews.com", "itaglive.com", "jamesrgrangerjr.com", "jesus-is-savior.com", "jewsnews.co.il", "jihadwatch.org", "jimstone.is", "journal-neo.org", "judicialwatch.org", "kagfeed.com", "katehon.com", "knowledgeoftoday.org", "ladylibertysnews.com", "lewrockwell.com", "liberalbias.com", "liberaldarkness.com", "libertyblitzkrieg.com", "libertynews.com", "libertytalk.fm", "libertyunyielding.com", "libertyvideos.org", "libertywriters.com", "lifenews.com", "lifesitenews.com", "lifezette.com", "liveactionnews.org", "liveleak.com", "livevote.com", "loanpride.com", "londonwebnews.com", "lovethispic.com", "lushforlife.com", "macedoniaonline.eu", "mad-yet.blogspot.com", "madpatriots.com", "madworldnews.com", "meanlefthook.com", "mediamass.net", "mentor2day.com", "militianews.com", "mminfo24.com", "moonofalabama.org", "mrc.org", "myfreshnews.com", "nation.com.pk", "nationalreport.net", "nationalufocenter.com", "nationalvanguard.org", "naturalblaze.com", "naturalnews.com", "naturalnewsblogs.com", "neonnettle.com", "news4ktla.com", "newsbiscuit.com", "newsbreakers.org", "newscorpse.com", "newsexaminer.net", "newsfrompolitics.com", "newsjustforyou1.blogspot.com", "newslogue.com", "newsmax.com", "newsmutiny.com", "newspunch.com", "newstarget.com", "newstoad.net", "newsuptoday.com", "newswatch28.com", "newswire-24.com", "newswithviews.com", "newzmagazine.com", "nomorefakenews.com", "northcrane.com", "notallowedto.com", "noticias-frescas.com", "notizzia.com", "now8news.com", "nowtheendbegins.com", "nutritionalanarchy.com", "oathkeepers.org", "objectiveministries.org", "occupydemocrats.com", "occupyliberals.com", "off-guardian.org", "offgridsurvival.com", "oftwominds.com", "onepoliticalplaza.com", "orientalreview.org", "other98.com", "pakalertpress.com", "palmerreport.com", "patriotchronicle.com", "patriotcrier.com", "patriotnewsdaily.com", "patriotpost.us", "patriotrising.com", "patriotupdate.com", "paulcraigroberts.org", "pjmedia.com", "platosguns.com", "politicalcult.com", "politicalgarbagechute.com", "politicalmayhem.news", "politicalsitenews.com", "politicot.com", "politicususa.com", "pollhype.com", "postcard.news", "postillon.com", "pravda.ru", "pravdareport.com", "prepperwebsite.com", "presstv.com", "prisonplanet.com", "progressivestoday.com", "projectveritas.com", "puppetstringnews.com", "rawstory.com", "react365.com", "reagancoalition.com", "realfarmacy.com", "realnewsrightnow.com", "realtimepolitics.com", "rearfront.com", "redstate.com", "redstatewatcher.com", "remedydaily.com", "rense.com", "reporter.bz", "responsibletechnology.org", "returnofkings.com", "rickwells.us", "rightalert.com", "rightwingnews.com", "rightwingtribune.com", "rogue-nation3.com", "rt.com", "rumormillnews.com", "russia-insider.com", "rwnofficial.com", "satirewire.com", "sensationalisttimes.com", "shareblue.com", "sheepkillers.com", "silverbearcafe.com", "silverdoctors.com", "silverstealers.net", "skeptiko.com", "smag31.com", "sonsoflibertyradio.com", "sovereignman.com", "sportspickle.com", "sputniknews.com", "stgeorgegazette.com", "stillnessinthestorm.com", "stneotscitizen.com", "stormcloudsgathering.com", "stuppid.com", "subjectpolitics.com", "success-street.com", "tdtalliance.com", "teaparty.org", "the-postillon.com", "theamericanmirror.com", "thebigriddle.com", "theblaze.com", "thecommonsenseshow.com", "theconservativetreehouse.com", "thedailymash.co.uk", "thedailysheeple.com", "thedailywtf.com", "theduran.com", "theeconomiccollapseblog.com", "theeventchronicle.com", "thefederalistpapers.org", "thefreepatriot.org", "thefreethoughtproject.com", "thegatewaypundit.com", "thegoldandoilguy.com", "theinformedamerican.net", "thelapine.ca", "thelibertybeacon.com", "thelibertymill.com", "themindunleashed.com", "themindunleashed.org", "themuslimissue.wordpress.com", "thenationalmarijuananews.com", "thenewamerican.com", "thenewsdoctors.com", "thepeoplescube.com", "thephaser.com", "thepoliticalinsider.com", "thepremiumnews.com", "theracketreport.com", "therightscoop.com", "therightstuff.biz", "therooster.com", "therundownlive.com", "theskunk.org", "thesmokersclub.com", "thetruthaboutcancer.com", "thetruthdivision.com", "thetruthseeker.co.uk", "thetruthwins.com", "theunrealtimes.com", "thevalleyreport.com", "threepercenternation.com", "thuglifevideos.com", "tomwoods.com", "topinfopost.com", "trend-news.com", "trueactivist.com", "truepundit.com", "trumpbetrayed.us", "truthandaction.org", "truthfeednews.com", "truthrevolt.org", "twitchy.com", "ufoholic.com", "unclesamsmisguidedchildren.com", "unconfirmedsources.com", "undergroundworldnews.com", "unitedmediapublishing.com", "universaleinfo.com", "unz.com", "urdoca.com", "usamagazinestudio.com", "usanewstoday.com", "usasupreme.com", "usawatchdog.com", "uschronicle.com", "usdefensewatch.com", "ussanews.com", "ustruthwire.com", "vdare.com", "veteranstoday.com", "vigilantcitizen.com", "viralcords.com", "viralliberty.com", "viralnewssocial.com", "wakeupthesheep.com", "wakingtimes.com", "wallstreetonparade.com", "washingtonsblog.com", "waterfordwhispersnews.com", "wearechange.org", "wearethellod.com", "weaselzippers.us", "weeklyworldnews.com", "weshapelife.org", "whatdoesitmean.com", "whatreallyhappened.com", "whowhatwhy.org", "whydontyoutrythis.com", "wikispooks.com", "williambanzai7.blogspot.com", "witscience.org", "wnd.com", "wolfstreet.com", "wonkie.com", "worldnewsdailyreport.com", "worldtruth.tv", "x22report.com", "yesimright.com", "yournewswire.com", "zerohedge.com", "zootfeed.com"]

# with open("website_list.txt") as website_list:
#   while website := website_list.readline():
#     webregex+=(website.replace("\n", "") + ".*|")
#     urls.append(website.replace("\n", ""))
# webregex = webregex[:-3]
# webregex+=")"

# print(webregex, urls)

subreddits = ["coronavirus", "news", "politics", "ideological", "local", "science", "technology", "health", "business"]
cvsubreddits = ["coronavirus", "news", "politics", "ideological", "local", "science", "technology", "health", "business" ,"coronavirusus", "covid19positive", "coronavirusuk", "covidvaccinated", "lockdownskepticism", "coronavirusdownunder", "maryland", "nyc", "covidiots", "joebiden", "coronaviruscirclejerk", "bayarea", "collapse", "environment", "florida", "brexit", "politicaldiscussion", "michigan", "medicine", "economics"]
files = ['./submission_data/business_submissions.json', './submission_data/coronavirus_submissions.json', './submission_data/health_submissions.json', './submission_data/news_submissions.json', './submission_data/politics_submissions.json', './submission_data/science_submissions.json', './submission_data/technology_submissions.json']

fdata = []
for file in files:
  f = open(file)
  data = json.load(f)
  for i in data:
    # filter subreddits
    if "subreddit" in i and i["subreddit"].lower() in cvsubreddits and "domain" in i and i["domain"] in urls:
      print("subreddit: {}, url: {}".format(i["subreddit"], i["url"]))
      fdata.append(i)

# create new json file with filtered data
with open('filtered.json', 'w') as outfile:
  json.dump(fdata, outfile)

df = pd.read_json ('filtered.json')
df.to_csv ('filtered.csv', index = None)